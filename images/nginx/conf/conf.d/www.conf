server {
    listen 80 default_server;
    listen [::]:80 default_server;

    root /app/src/public;

    index index.php index.html index.htm index.nginx-debian.html;

    server_name my.app;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
       include snippets/fastcgi-php.conf;
       fastcgi_pass php-fpm:9000;
       access_log /var/log/nginx/laravel_access.log;
       error_log /var/log/nginx/laravel_error.log;
    }

    location ~ /\.ht {
       deny all;
    }

    large_client_header_buffers 4 16k;
    client_max_body_size 30m;
    client_body_buffer_size 128k;
    fastcgi_connect_timeout 300;
    fastcgi_read_timeout 300;
    fastcgi_send_timeout 300;
    fastcgi_buffer_size 64k;
    fastcgi_buffers   4 32k;
    fastcgi_busy_buffers_size 64k;
    fastcgi_temp_file_write_size 64k;
}
